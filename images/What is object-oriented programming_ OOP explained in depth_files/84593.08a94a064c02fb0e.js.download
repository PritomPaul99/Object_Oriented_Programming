"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[84593],{84593:function(a,b,c){c.r(b),c.d(b,{default:function(){return z}});var d=c(89703),e=c(6188),f=c(37513),g=c(44620),h=c(10509),i=c(98216),j=c(34099),k=c(36670),l=c(93886),m=c(30833),n=c(52908),o=c(89763),p=c(96566),q=c(23221),r=c(33257),s=c(96865),t=c(41460),u=c(96509);function v(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function w(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){v(a,b,c[b])})}return a}function x(a,b){return b=null!=b?b:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):(function(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);c.push.apply(c,d)}return c})(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))}),a}var y=function(a){return!!["/enterprise/demos/demo-1","/enterprise/demos/demo-2",].filter(function(b){return a.includes(b)}).length},z=function(){var a,b,c,v,z,A,B,C,D,E,F,G,H,I,J,K;return v=(a={googleAccountConfigs:{client_id:(0,k.ZP)()||(0,k.a8)()?m.iOS.DEVELOPMENT:m.iOS.PRODUCTION,cancel_on_tap_outside:!1,context:"signin",prompt_parent_id:"g_id_onload"}}).googleAccountConfigs,D=(z="https://accounts.google.com/gsi/client",B=(A=(0,d.useState)(z?"loading":"idle"))[0],C=A[1],(0,d.useEffect)(function(){if(!z){C("idle");return}var a=document.querySelector('script[src="'.concat(z,'"]'));if(a)C(a.getAttribute("data-status")||"idle");else{(a=document.createElement("script")).src=z,a.async=!0,a.setAttribute("data-status","loading"),document.body.appendChild(a);var b=function(b){a&&a.setAttribute("data-status","load"===b.type?"ready":"error")};a.addEventListener("load",b),a.addEventListener("error",b)}var c=function(a){C("load"===a.type?"ready":"error")};return a.addEventListener("load",c),a.addEventListener("error",c),function(){a&&(a.removeEventListener("load",c),a.removeEventListener("error",c))}},[z]),B),E=(0,e.ix)(function(a){var b,c;return null===(b=a.user)|| void 0===b?void 0:null===(c=b.info)|| void 0===c?void 0:c.loggedOut}),F=(0,e.ix)(function(a){var b,c;return null===(b=a.user)|| void 0===b?void 0:null===(c=b.info)|| void 0===c?void 0:c.loaded}),G=(0,e.ix)(function(a){var b,c,d;return null===(b=a.user)|| void 0===b?void 0:null===(c=b.info)|| void 0===c?void 0:null===(d=c.data)|| void 0===d?void 0:d.user_id}),H=(0,j.useRouter)(),I=(0,e.ix)(function(a){return a.userConfig}),J=(0,e.TL)(),K=!y(H.pathname)&&((0,k.hN)()&&(0,l.gx)(null===(b=I.data)|| void 0===b?void 0:b.constants[m.zj2.ENABLE_SOCIAL_LOGIN_BETA])||(0,l.gx)(null===(c=I.data)|| void 0===c?void 0:c.constants[m.zj2.ENABLE_SOCIAL_LOGIN])),(0,d.useEffect)(function(){try{if(window.google&&"ready"===D){var a,b,c;null===(a=window.google)|| void 0===a||null===(b=a.accounts)|| void 0===b||null===(c=b.id)|| void 0===c||c.initialize(x(w({},v),{callback:function(a){return function(a,b,c){c(s.n.close());var d,e=null==window?void 0:null===(d=window.location)|| void 0===d?void 0:d.pathname;if(!a.credential)throw Error("Couldn't get id token from Google");var j=(null==e?void 0:e.includes("/login/holiday_campaign"))?"/unlimited":(null==e?void 0:e.includes("/login"))||(null==e?void 0:e.includes("signup"))?"/":null!=e?e:"/";(0,f.Z)({url:"/api/google-otl/return",type:"POST",data:x(w({token:a.credential,referral_site:(0,p.Ar)(),last_referral_site:(0,p.rT)(),referral_code:(0,q.I)()},(0,r.We)(),(0,r.bB)()),{impact_click_id:(0,u.iZ)()})}).then(function(a){var d=JSON.parse(a);if(302===d.status){b.push(d.location);return}!0===d.login_successful?(c((0,t.BL)()),document.documentElement.style.removeProperty("--loggedout-true"),document.documentElement.style.setProperty("--loggedout-false","none"),g.Z.dispatch(h.V.load()),g.Z.dispatch(i.s.load()),b.push(j),(0,o.qP)(d.operation===m.WHI.OPERATION.LOGIN?o.f2.LOGIN:o.f2.SIGNUP,d.operation===m.WHI.OPERATION.LOGIN?o.bt.LOGIN_SUCCEEDED:o.bt.SIGNUP_SUCCEEDED,"GOOGLE_OTL")):((0,o.qP)(d.operation===m.WHI.OPERATION.LOGIN?o.f2.LOGIN:o.f2.SIGNUP,d.operation===m.WHI.OPERATION.LOGIN?o.bt.LOGIN_FAILED:o.bt.SIGNUP_FAILED,"GOOGLE_OTL"),b.push("/login"))})}(a,H,J)}}))}}catch(d){(0,n.uX)(d)}},[D]),(0,d.useEffect)(function(){try{var a,b,c,d,e,f,g,h;if(G&&(null==window||null===(a=window.google)|| void 0===a||null===(b=a.accounts)|| void 0===b||null===(c=b.id)|| void 0===c||null===(d=c.cancel)|| void 0===d||d.call(c)),!E&&!F||G&&F)return;"ready"===D&&K&&(null===(e=window.google)|| void 0===e||null===(f=e.accounts)|| void 0===f||null===(g=f.id)|| void 0===g||null===(h=g.prompt)|| void 0===h||h.call(g))}catch(i){(0,n.uX)(i)}},[D,F,G,E,K]),(0,d.useEffect)(function(){var a,b,c,d;y(H.pathname)&&(null==window||null===(a=window.google)|| void 0===a||null===(b=a.accounts)|| void 0===b||null===(c=b.id)|| void 0===c||null===(d=c.cancel)|| void 0===d||d.call(c))},[H]),null}}}])
//# sourceMappingURL=84593.08a94a064c02fb0e.js.map